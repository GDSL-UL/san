<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 4 R Scripts and Notebooks | Spatial Analysis Notes</title>
  <meta name="description" content="Materials for a Spatial Analysis course in R." />
  <meta name="generator" content="bookdown 0.13 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 4 R Scripts and Notebooks | Spatial Analysis Notes" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Materials for a Spatial Analysis course in R." />
  <meta name="github-repo" content="gdsl-ul/san" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 4 R Scripts and Notebooks | Spatial Analysis Notes" />
  
  <meta name="twitter:description" content="Materials for a Spatial Analysis course in R." />
  

<meta name="author" content="Francisco Rowe &amp; Dani Arribas-Bel" />


<meta name="date" content="2020-02-05" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="setting-the-working-directory.html"/>
<link rel="next" href="getting-help.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />









<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">A Minimal Book Example</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Spatial Analysis Notes</a></li>
<li class="chapter" data-level="2" data-path="intro.html"><a href="intro.html"><i class="fa fa-check"></i><b>2</b> Introduction</a><ul>
<li class="chapter" data-level="2.1" data-path="intro.html"><a href="intro.html#dependencies"><i class="fa fa-check"></i><b>2.1</b> Dependencies</a></li>
<li class="chapter" data-level="2.2" data-path="intro.html"><a href="intro.html#introducing-r"><i class="fa fa-check"></i><b>2.2</b> Introducing R</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="setting-the-working-directory.html"><a href="setting-the-working-directory.html"><i class="fa fa-check"></i><b>3</b> Setting the working directory</a></li>
<li class="chapter" data-level="4" data-path="r-scripts-and-notebooks.html"><a href="r-scripts-and-notebooks.html"><i class="fa fa-check"></i><b>4</b> R Scripts and Notebooks</a></li>
<li class="chapter" data-level="5" data-path="getting-help.html"><a href="getting-help.html"><i class="fa fa-check"></i><b>5</b> Getting Help</a></li>
<li class="chapter" data-level="6" data-path="variables-and-objects.html"><a href="variables-and-objects.html"><i class="fa fa-check"></i><b>6</b> Variables and objects</a></li>
<li class="chapter" data-level="7" data-path="basic-data-types.html"><a href="basic-data-types.html"><i class="fa fa-check"></i><b>7</b> Basic Data Types</a></li>
<li class="chapter" data-level="8" data-path="random-variables.html"><a href="random-variables.html"><i class="fa fa-check"></i><b>8</b> Random Variables</a></li>
<li class="chapter" data-level="9" data-path="factor.html"><a href="factor.html"><i class="fa fa-check"></i><b>9</b> Factor</a><ul>
<li class="chapter" data-level="9.1" data-path="factor.html"><a href="factor.html#what-is-a-factor"><i class="fa fa-check"></i><b>9.1</b> What is a factor?</a></li>
<li class="chapter" data-level="9.2" data-path="factor.html"><a href="factor.html#create-a-factor"><i class="fa fa-check"></i><b>9.2</b> Create a factor</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="data-frames.html"><a href="data-frames.html"><i class="fa fa-check"></i><b>10</b> Data Frames</a><ul>
<li class="chapter" data-level="10.1" data-path="data-frames.html"><a href="data-frames.html#create-a-data-frame"><i class="fa fa-check"></i><b>10.1</b> Create a data frame</a></li>
<li class="chapter" data-level="10.2" data-path="data-frames.html"><a href="data-frames.html#referencing-data-frame"><i class="fa fa-check"></i><b>10.2</b> Referencing data frame</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="read-data.html"><a href="read-data.html"><i class="fa fa-check"></i><b>11</b> Read Data</a><ul>
<li class="chapter" data-level="11.1" data-path="read-data.html"><a href="read-data.html#quickly-inspect-the-data"><i class="fa fa-check"></i><b>11.1</b> Quickly inspect the data</a></li>
<li class="chapter" data-level="11.2" data-path="read-data.html"><a href="read-data.html#adding-new-variables"><i class="fa fa-check"></i><b>11.2</b> Adding new variables</a></li>
<li class="chapter" data-level="11.3" data-path="read-data.html"><a href="read-data.html#selecting-variables"><i class="fa fa-check"></i><b>11.3</b> Selecting variables</a></li>
<li class="chapter" data-level="11.4" data-path="read-data.html"><a href="read-data.html#filtering-data"><i class="fa fa-check"></i><b>11.4</b> Filtering data</a></li>
<li class="chapter" data-level="11.5" data-path="read-data.html"><a href="read-data.html#joining-data-frames"><i class="fa fa-check"></i><b>11.5</b> Joining data frames</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="saving.html"><a href="saving.html"><i class="fa fa-check"></i><b>12</b> Saving</a></li>
<li class="chapter" data-level="13" data-path="spatial-data-frames.html"><a href="spatial-data-frames.html"><i class="fa fa-check"></i><b>13</b> Spatial Data Frames</a><ul>
<li class="chapter" data-level="13.1" data-path="spatial-data-frames.html"><a href="spatial-data-frames.html#read-spatial-data"><i class="fa fa-check"></i><b>13.1</b> Read Spatial Data</a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="basic-mapping.html"><a href="basic-mapping.html"><i class="fa fa-check"></i><b>14</b> Basic Mapping</a><ul>
<li class="chapter" data-level="14.1" data-path="basic-mapping.html"><a href="basic-mapping.html#using-plot"><i class="fa fa-check"></i><b>14.1</b> Using <code>plot</code></a></li>
<li class="chapter" data-level="14.2" data-path="basic-mapping.html"><a href="basic-mapping.html#using-tmap"><i class="fa fa-check"></i><b>14.2</b> Using <code>tmap</code></a><ul>
<li class="chapter" data-level="14.2.1" data-path="basic-mapping.html"><a href="basic-mapping.html#comparing-geographies"><i class="fa fa-check"></i><b>14.2.1</b> Comparing geographies</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="15" data-path="useful-functions.html"><a href="useful-functions.html"><i class="fa fa-check"></i><b>15</b> Useful Functions</a></li>
<li class="chapter" data-level="16" data-path="points.html"><a href="points.html"><i class="fa fa-check"></i><b>16</b> Points</a><ul>
<li class="chapter" data-level="16.1" data-path="points.html"><a href="points.html#dependencies-1"><i class="fa fa-check"></i><b>16.1</b> Dependencies</a></li>
<li class="chapter" data-level="16.2" data-path="points.html"><a href="points.html#data"><i class="fa fa-check"></i><b>16.2</b> Data</a></li>
<li class="chapter" data-level="16.3" data-path="points.html"><a href="points.html#kde"><i class="fa fa-check"></i><b>16.3</b> KDE</a><ul>
<li class="chapter" data-level="16.3.1" data-path="points.html"><a href="points.html#one-dimensional-kde"><i class="fa fa-check"></i><b>16.3.1</b> One-dimensional KDE</a></li>
<li class="chapter" data-level="16.3.2" data-path="points.html"><a href="points.html#two-dimensional-spatial-kde"><i class="fa fa-check"></i><b>16.3.2</b> Two-dimensional (spatial) KDE</a></li>
</ul></li>
<li class="chapter" data-level="16.4" data-path="points.html"><a href="points.html#spatial-interpolation"><i class="fa fa-check"></i><b>16.4</b> Spatial Interpolation</a><ul>
<li class="chapter" data-level="16.4.1" data-path="points.html"><a href="points.html#inverse-distance-weight-idw-interpolation"><i class="fa fa-check"></i><b>16.4.1</b> Inverse Distance Weight (IDW) interpolation</a></li>
<li class="chapter" data-level="16.4.2" data-path="points.html"><a href="points.html#a-surface-of-housing-prices"><i class="fa fa-check"></i><b>16.4.2</b> A surface of housing prices</a></li>
<li class="chapter" data-level="16.4.3" data-path="points.html"><a href="points.html#what-should-the-next-houses-price-be"><i class="fa fa-check"></i><b>16.4.3</b> <em>“What should the next house’s price be?”</em></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="17" data-path="flows.html"><a href="flows.html"><i class="fa fa-check"></i><b>17</b> Flows</a></li>
<li class="chapter" data-level="18" data-path="spatial-econometrics.html"><a href="spatial-econometrics.html"><i class="fa fa-check"></i><b>18</b> Spatial Econometrics</a></li>
<li class="chapter" data-level="19" data-path="multilevel-models-pt-i.html"><a href="multilevel-models-pt-i.html"><i class="fa fa-check"></i><b>19</b> Multilevel Models (Pt. I)</a></li>
<li class="chapter" data-level="20" data-path="multilevel-models-pt-ii.html"><a href="multilevel-models-pt-ii.html"><i class="fa fa-check"></i><b>20</b> Multilevel Models (Pt. II)</a></li>
<li class="chapter" data-level="21" data-path="gwr.html"><a href="gwr.html"><i class="fa fa-check"></i><b>21</b> GWR</a></li>
<li class="chapter" data-level="22" data-path="space-time-analysis.html"><a href="space-time-analysis.html"><i class="fa fa-check"></i><b>22</b> Space-Time Analysis</a></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Spatial Analysis Notes</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="r-scripts-and-notebooks" class="section level1">
<h1><span class="header-section-number">Chapter 4</span> R Scripts and Notebooks</h1>
<p>An <em>R script</em> is a series of commands that you can execute at one time and help you save time. So you don’t repeat the same steps every time you want to execute the same process with different datasets. An R script is just a plain text file with R commands in it.</p>
<p>To create an R script in RStudio, you need to</p>
<ul>
<li><p>Open a new script file: <em>File</em> &gt; <em>New File</em> &gt; <em>R Script</em></p></li>
<li><p>Write some code on your new script window by typing eg. <code>mtcars</code></p></li>
<li><p>Run the script. Click anywhere on the line of code, then hit <em>Ctrl + Enter</em> (Windows) or <em>Cmd + Enter</em> (Mac) to run the command or select the code chunk and click <em>run</em> on the right-top corner of your script window. If do that, you should get:</p></li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">mtcars</code></pre></div>
<pre><code>##                      mpg cyl  disp  hp drat    wt  qsec vs am gear carb
## Mazda RX4           21.0   6 160.0 110 3.90 2.620 16.46  0  1    4    4
## Mazda RX4 Wag       21.0   6 160.0 110 3.90 2.875 17.02  0  1    4    4
## Datsun 710          22.8   4 108.0  93 3.85 2.320 18.61  1  1    4    1
## Hornet 4 Drive      21.4   6 258.0 110 3.08 3.215 19.44  1  0    3    1
## Hornet Sportabout   18.7   8 360.0 175 3.15 3.440 17.02  0  0    3    2
## Valiant             18.1   6 225.0 105 2.76 3.460 20.22  1  0    3    1
## Duster 360          14.3   8 360.0 245 3.21 3.570 15.84  0  0    3    4
## Merc 240D           24.4   4 146.7  62 3.69 3.190 20.00  1  0    4    2
## Merc 230            22.8   4 140.8  95 3.92 3.150 22.90  1  0    4    2
## Merc 280            19.2   6 167.6 123 3.92 3.440 18.30  1  0    4    4
## Merc 280C           17.8   6 167.6 123 3.92 3.440 18.90  1  0    4    4
## Merc 450SE          16.4   8 275.8 180 3.07 4.070 17.40  0  0    3    3
## Merc 450SL          17.3   8 275.8 180 3.07 3.730 17.60  0  0    3    3
## Merc 450SLC         15.2   8 275.8 180 3.07 3.780 18.00  0  0    3    3
## Cadillac Fleetwood  10.4   8 472.0 205 2.93 5.250 17.98  0  0    3    4
## Lincoln Continental 10.4   8 460.0 215 3.00 5.424 17.82  0  0    3    4
## Chrysler Imperial   14.7   8 440.0 230 3.23 5.345 17.42  0  0    3    4
## Fiat 128            32.4   4  78.7  66 4.08 2.200 19.47  1  1    4    1
## Honda Civic         30.4   4  75.7  52 4.93 1.615 18.52  1  1    4    2
## Toyota Corolla      33.9   4  71.1  65 4.22 1.835 19.90  1  1    4    1
## Toyota Corona       21.5   4 120.1  97 3.70 2.465 20.01  1  0    3    1
## Dodge Challenger    15.5   8 318.0 150 2.76 3.520 16.87  0  0    3    2
## AMC Javelin         15.2   8 304.0 150 3.15 3.435 17.30  0  0    3    2
## Camaro Z28          13.3   8 350.0 245 3.73 3.840 15.41  0  0    3    4
## Pontiac Firebird    19.2   8 400.0 175 3.08 3.845 17.05  0  0    3    2
## Fiat X1-9           27.3   4  79.0  66 4.08 1.935 18.90  1  1    4    1
## Porsche 914-2       26.0   4 120.3  91 4.43 2.140 16.70  0  1    5    2
## Lotus Europa        30.4   4  95.1 113 3.77 1.513 16.90  1  1    5    2
## Ford Pantera L      15.8   8 351.0 264 4.22 3.170 14.50  0  1    5    4
## Ferrari Dino        19.7   6 145.0 175 3.62 2.770 15.50  0  1    5    6
## Maserati Bora       15.0   8 301.0 335 3.54 3.570 14.60  0  1    5    8
## Volvo 142E          21.4   4 121.0 109 4.11 2.780 18.60  1  1    4    2</code></pre>
<ul>
<li>Save the script: <em>File</em> &gt; <em>Save As</em>, select your required destination folder, and enter any filename that you like, provided that it ends with the file extension <em>.R</em></li>
</ul>
<p>An <em>R Notebook</em> is an R Markdown document with descriptive text and code chunks that can be executed independently and interactively, with output visible immediately beneath a code chunk - see <span class="citation">Xie, Allaire, and Grolemund (<a href="#ref-Xie_et_al_2019_book">2019</a>)</span>.</p>
<p>To create an R Notebook, you need to:</p>
<ul>
<li>Open a new script file: <em>File</em> &gt; <em>New File</em> &gt; <em>R Notebook</em></li>
</ul>
<div class="figure">
<img src="../san/figs/rnotebook_yaml.png" alt="Fig. 2. YAML metadata for notebooks." />
<p class="caption">Fig. 2. YAML metadata for notebooks.</p>
</div>
<ul>
<li>Insert code chunks, either:</li>
</ul>
<ol style="list-style-type: decimal">
<li>use the <em>Insert</em> command on the editor toolbar;</li>
<li>use the keyboard shortcut <em>Ctrl + Alt + I</em> or <em>Cmd + Option + I</em> (Mac); or,</li>
<li>type the chunk delimiters <code>```{r}</code> and <code>```</code></li>
</ol>
<p>In a chunk code you can produce text output, tables, graphics and write code! You can control these outputs via chunk options which are provided inside the curly brackets eg.</p>
<div class="figure">
<img src="../san/figs/codechunk.png" alt="Fig. 3. Code chunk example. Details on the various options: https://rmarkdown.rstudio.com/lesson-3.html" />
<p class="caption">Fig. 3. Code chunk example. Details on the various options: <a href="https://rmarkdown.rstudio.com/lesson-3.html" class="uri">https://rmarkdown.rstudio.com/lesson-3.html</a></p>
</div>
<ul>
<li><p>Execute code: hit <em>“Run Current Chunk”</em>, <em>Ctrl + Shift + Enter</em> or <em>Cmd + Shift + Enter</em> (Mac)</p></li>
<li><p>Save an R notebook: <em>File</em> &gt; <em>Save As</em>. A notebook has a <code>*.Rmd</code> extension and when it is saved a <code>*.nb.html</code> file is automatically created. The latter is a self-contained HTML file which contains both a rendered copy of the notebook with all current chunk outputs and a copy of the *.Rmd file itself.</p></li>
</ul>
<p>Rstudio also offers a <em>Preview</em> option on the toolbar which can be used to create pdf, html and word versions of the notebook. To do this, choose from the drop-down list menu <code>knit to ...</code></p>
</div>
<h3>References</h3>
<div id="refs" class="references">
<div id="ref-Xie_et_al_2019_book">
<p>Xie, Yihui, JJ Allaire, and Garrett Grolemund. 2019. <em>R Markdown: The Definitive Guide</em>. CRC Press, Taylor &amp; Francis, Chapman &amp; Hall Book. <a href="https://bookdown.org/yihui/rmarkdown/" class="uri">https://bookdown.org/yihui/rmarkdown/</a>.</p>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="setting-the-working-directory.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="getting-help.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/rstudio/bookdown-demo/edit/master/01-intro.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"download": ["spatial_analysis_notes.pdf", "spatial_analysis_notes.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
